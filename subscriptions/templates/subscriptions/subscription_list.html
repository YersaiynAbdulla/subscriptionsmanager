{% extends 'base.html' %}

{% block title %}–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏{% endblock %}

{% block content %}
<h2 class="mb-4">–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏</h2>

<div class="mb-3 d-flex justify-content-between align-items-center">
  <span class="badge bg-primary fs-6">–û–±—â–∞—è —Å—É–º–º–∞: {{ total_cost }} ‚Ç∏</span>
  <a href="{% url 'subscription_add' %}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å</a>
</div>

{% for subscription in subscriptions %}
  <div class="card mb-4 shadow-sm border rounded-4" style="background-color: #f0f8ff;">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-start flex-wrap">
        <div class="me-4 mb-2">
          <h5 class="card-title">{{ subscription.name }}</h5>
          <p class="card-text">
            <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ subscription.category.name }}<br>
            <strong>–¶–µ–Ω–∞:</strong> {{ subscription.price }} ‚Ç∏<br>
            <strong>–ü–µ—Ä–∏–æ–¥:</strong> {{ subscription.get_renewal_period_display }}<br>
            <strong>–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã:</strong> {{ subscription.paid_date|date:"d.m.Y" }}<br>
            <strong>–°—Ä–æ–∫ –¥–æ:</strong> {{ subscription.due_date|date:"d.m.Y" }}
          </p>
        </div>

        <div class="text-end">
          {% if subscription.is_paid %}
            <span class="badge bg-success mb-2 px-3 py-2">‚úîÔ∏è –û–ø–ª–∞—á–µ–Ω–æ</span>
          {% else %}
            <span class="badge bg-danger mb-2 px-3 py-2">‚ùå –ù–µ –æ–ø–ª–∞—á–µ–Ω–æ</span><br>
            <a href="{% url 'mark_as_paid' subscription.id %}" class="btn btn-outline-primary btn-sm mt-2">üí∞ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ–ø–ª–∞—á–µ–Ω–æ</a>
          {% endif %}
        </div>
      </div>

      <hr>
      <div class="d-flex gap-2">
        <a href="{% url 'subscription_edit' subscription.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <a href="{% url 'subscription_delete' subscription.id %}" class="btn btn-danger btn-sm">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
      </div>
    </div>
  </div>
{% empty %}
  <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫.</p>
{% endfor %}
{% endblock %}
